#ifndef _cw2015_battery_H_
#define _cw2015_battery_H_
#include <linux/module.h>
#include <linux/moduleparam.h>
#include <linux/kernel.h>
#include <linux/device.h>
#include <linux/gpio.h>
#include <linux/fs.h>
#include <linux/errno.h>
#include <linux/slab.h>
#include <linux/types.h>
#include <linux/fcntl.h>
#include <linux/delay.h>
#include <linux/miscdevice.h>
#include <linux/vmalloc.h>
#include <linux/i2c.h>


#define _cw2015_battery_H_
#define	READ_CW2015				0xc5
#define	WRITE_CW2015			0xc4

#define REG_VERSION             0x0
#define REG_VCELL               0x2
#define REG_SOC                 0x4
#define REG_RRT_ALERT           0x6
#define REG_CONFIG              0x8
#define REG_MODE                0xA
#define REG_BATINFO             0x10

#define MODE_SLEEP_MASK         (0x3<<6)
#define MODE_SLEEP              (0x3<<6)
#define MODE_NORMAL             (0x0<<6)
#define MODE_QUICK_START        (0x3<<4)
#define MODE_RESTART            (0xf<<0)

#define CONFIG_UPDATE_FLG       (0x1<<1)

#define ATHD                    (0x0<<3)        //ATHD = 0%

#define SIZE_BATINFO        64
#define BATTERY_CAPACITY_ERROR  25
#define BATTERY_CHARGING_ZERO  (30 * 60)
#define BATTERY_UP_MAX_CHANGE   720             // the max time allow battery change quantity
#define BATTERY_DOWN_MIN_CHANGE 60             // the min time allow battery change quantity when run
#define BATTERY_DOWN_MIN_CHANGE_SLEEP 1800      // the min time allow battery change quantity when run 30min
//#define BAT_LOW_INTERRUPT    1
//#define CW2015_GET_RRT

/*????????????????????????????????????I*/
#if defined(CONFIG_PRODUCT_X1000_Q1)
static unsigned char cw_bat_config_info[SIZE_BATINFO] = {
0x15  ,0x7E  ,0x61  ,0x59  ,0x57  ,0x55  ,0x56  ,
0x4C  ,0x4E  ,0x4D  ,0x50  ,0x4C  ,0x45  ,0x3A  ,
0x2D  ,0x27  ,0x22  ,0x1E  ,0x19  ,0x1E  ,0x2A  ,
0x3C  ,0x48  ,0x45  ,0x1D  ,0x94  ,0x08  ,0xF6  ,
0x15  ,0x29  ,0x48  ,0x51  ,0x5D  ,0x60  ,0x63  ,
0x66  ,0x45  ,0x1D  ,0x83  ,0x38  ,0x09  ,0x43  ,
0x16  ,0x42  ,0x76  ,0x98  ,0xA5  ,0x1B  ,0x41  ,
0x76  ,0x99  ,0xBF  ,0x80  ,0xC0  ,0xEF  ,0xCB  ,
0x2F  ,0x00  ,0x64  ,0xA5  ,0xB5  ,0x0E  ,0x30  ,
0x29
};
#elif defined(CONFIG_PRODUCT_X1000_M2X) || defined(CONFIG_PRODUCT_X1000_M5S)
static unsigned char cw_bat_config_info[SIZE_BATINFO] = {
0x17  ,0x5C  ,0x6D  ,0x6C  ,0x69  ,0x67  ,0x63  ,
0x59  ,0x6F  ,0x63  ,0x4C  ,0x55  ,0x51  ,0x4C  ,
0x44  ,0x3E  ,0x34  ,0x28  ,0x24  ,0x1D  ,0x24  ,
0x3F  ,0x49  ,0x42  ,0x14  ,0x9F  ,0x09  ,0x9A  ,
0x02  ,0x03  ,0x47  ,0x53  ,0x64  ,0x65  ,0x5F  ,
0x65  ,0x3F  ,0x1D  ,0x7C  ,0x2A  ,0x37  ,0x39  ,
0x52  ,0x87  ,0x8F  ,0x91  ,0x94  ,0x52  ,0x82  ,
0x8C  ,0x92  ,0x96  ,0x6E  ,0x79  ,0xA3  ,0xCB  ,
0x2F  ,0x7D  ,0x64  ,0xA5  ,0xB5  ,0x0E  ,0x30  ,
0x21
};
#elif defined(CONFIG_PRODUCT_X1000_ECMINI)
static unsigned char cw_bat_config_info[SIZE_BATINFO] = {
0x15  ,0x7E  ,0x79	,0x57  ,0x54  ,0x5F  ,0x60	,
0x5B  ,0x53  ,0x4E	,0x4E  ,0x50  ,0x54  ,0x57	,
0x56  ,0x58  ,0x51	,0x47  ,0x43  ,0x40  ,0x3B	,
0x3D  ,0x41  ,0x47	,0x53  ,0x65  ,0x0B  ,0x85	,
0x2D  ,0x4E  ,0x50	,0x56  ,0x5B  ,0x5C  ,0x5C	,
0x5C  ,0x33  ,0x0C	,0xAF  ,0x20  ,0x06  ,0x4C	,
0x29  ,0x64  ,0x8A	,0x92  ,0x97  ,0x41  ,0x66	,
0x81  ,0x97  ,0x9C	,0x80  ,0x60  ,0x95  ,0xCB	,
0x2F  ,0x00  ,0x64	,0xA5  ,0xB5  ,0xC1  ,0x46	,
0xAE
};
#else
static unsigned char cw_bat_config_info[SIZE_BATINFO] = {
0x17  ,0x5C  ,0x6D  ,0x6C  ,0x69  ,0x67  ,0x63  ,
0x59  ,0x6F  ,0x63  ,0x4C  ,0x55  ,0x51  ,0x4C  ,
0x44  ,0x3E  ,0x34  ,0x28  ,0x24  ,0x1D  ,0x24  ,
0x3F  ,0x49  ,0x42  ,0x14  ,0x9F  ,0x09  ,0x9A  ,
0x02  ,0x03  ,0x47  ,0x53  ,0x64  ,0x65  ,0x5F  ,
0x65  ,0x3F  ,0x1D  ,0x7C  ,0x2A  ,0x37  ,0x2E  ,
0x52  ,0x87  ,0x8F  ,0x91  ,0x94  ,0x52  ,0x82  ,
0x8C  ,0x92  ,0x96  ,0x6E  ,0x79  ,0xA3  ,0xCB  ,
0x2F  ,0x7D  ,0x64  ,0xA5  ,0xB5  ,0x0E  ,0x30  ,
0x21
};
#endif
//****************************struct*********************************/
struct cw_battery {
    struct workqueue_struct *battery_workqueue;
    struct delayed_work battery_delay_work;
	struct i2c_client *client;
	unsigned char usb_online;
	unsigned int capacity;
	unsigned int voltage;
	unsigned int time_to_empty;
};


static struct cw_battery* cw2015_battery = NULL;


#endif


